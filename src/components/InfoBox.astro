---
interface Props {
	difficulty: string | undefined;
	prerequisites?: string[];
}

const { difficulty, prerequisites } = Astro.props;

/**
 * Determines the visual color theme for the difficulty badge based on the provided skill level. It returns specific hex codes for "Fundamental", "Beginner", "Intermediate", and "Advanced" tiers, defaulting to a neutral gray for undefined or unrecognized levels.
 */
const getDifficultyColor = (level: string | undefined) => {
    if (level === "Fundamental") return "#3b82f6"; // Blue
    if (level === "Beginner") return "#10b981";    // Green
    if (level === "Elementary") return "#84cc16";  // Lime
    if (level === "Intermediate") return "#f59e0b"; // Orange
    if (level === "Advanced") return "#ef4444";    // Red
    return "#888";
};

const badgeColor = getDifficultyColor(difficulty);
---

<div class="info-box">
	<div class="info-item">
		<span class="label">Difficulty:</span>
		{
			/* Applies dynamic inline styles to the badge using the derived color. The background-color property utilizes hex alpha transparency (appending '20' to the hex code) to create a subtle tinted background while maintaining the solid text and border color for contrast.
			 */
		}
		<span
			class="badge"
			style={`background-color: ${badgeColor}20; color: ${badgeColor}; border-color: ${badgeColor}`}
		>
			{difficulty}
		</span>
	</div>

	{
		/** * Conditionally renders the prerequisites section only if the array exists. It iterates through the list of requirements to generate individual styled tags, ensuring any extra whitespace is trimmed from the text.
		 */
		prerequisites && (
			<div class="info-item">
				<span class="label">Prerequisites:</span>
				<div class="prereq-tags">
					{prerequisites.map((req) => (
						<span class="tag">{req.trim()}</span>
					))}
				</div>
			</div>
		)
	}
</div>

<style>
	.info-box {
		background: rgba(255, 255, 255, 0.03);
		border: 1px solid rgba(255, 255, 255, 0.1);
		border-radius: 8px;
		padding: 1rem 1.5rem;
		margin-top: 1.5rem;
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.info-item {
		display: flex;
		align-items: center;
		gap: 1rem;
		flex-wrap: wrap;
	}

	.label {
		font-weight: 600;
		color: #e0e0e0;
		font-size: 0.9rem;
		min-width: 100px;
	}

	.badge {
		font-size: 0.8rem;
		padding: 0.2rem 0.6rem;
		border-radius: 99px;
		font-weight: 600;
		border: 1px solid transparent;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	.prereq-tags {
		display: flex;
		gap: 0.5rem;
		flex-wrap: wrap;
	}

	.tag {
		background: #23262d;
		color: #a1a1aa;
		padding: 0.2rem 0.6rem;
		border-radius: 4px;
		font-size: 0.85rem;
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	@media (min-width: 600px) {
		.info-box {
			flex-direction: row;
			align-items: center;
			justify-content: space-between;
		}
	}
</style>
