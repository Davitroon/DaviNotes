---
import { ClientRouter } from "astro:transitions";
import SideBar from "../components/SideBar.astro";
import ScrollToTop from "../components/ScrollToTop.astro";
import Breadcrumbs from "../components/Breadcrumbs.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";
import "../styles/doc-layout.css";
import { languages } from "../data/languages";

/**
 * Defines the contract for the documentation layout.
 * The title prop is essential for SEO and browser tab identification, dynamically setting the HTML <title> tag for every page that utilizes this layout.
 */
interface Props {
	title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<title>{title}</title>
		{
			/* 
            Injects the necessary scripts to enable Astro's View Transitions.
            */
		}
		<ClientRouter />
	</head>
	<body>
		<div class="layout-container">
			{
				/* 
                The Sidebar component is tagged with the 'transition:persist' directive. 
                This is crucial for user experience, as it ensures the sidebar's state (such as scroll position or active grouping) remains unchanged while the user navigates 
                through different documentation pages.
                */
			}
			<SideBar
				languages={languages}
				currentPath={currentPath}
				transition:persist
			/>

			<main class="content-area">
				<header class="top-bar">
					<div class="breadcrumb-container">
						<button class="back-button" onclick="history.back()">
							‚Üê Go back
						</button>

						<Breadcrumbs />
					</div>
				</header>

				{
					/* 
                    The slot element acts as a placeholder for the specific content of each page. 
                    When this layout is wrapped around a page component, the page's markup is injected here.
					 */
				}
				<div class="page-content">
					<slot />
				</div>

				<Footer />
			</main>
		</div>

		<ScrollToTop />
	</body>
</html>
